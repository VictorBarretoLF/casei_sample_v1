plugins {
    id 'java-conventions'
    id 'shared-dependencies'
}

group = "com.casei360.integrationTest"

configurations {
    compileOnly {
        extendsFrom annotationProcessor
    }
}

dependencies {
    implementation(project(':domain'))
    implementation(project(':application'))
    implementation(project(':infrastructure'))

    testImplementation(project(path: ':domain', configuration: 'testClasses'))
    testImplementation(project(path: ':application', configuration: 'testClasses'))
    testImplementation(project(path: ':infrastructure', configuration: 'testClasses'))

    // Shared dependencies
    compileOnly LOMBOK
    annotationProcessor LOMBOK

    implementation SPRING_BOOT_STARTER_WEB
    implementation SPRING_BOOT_STARTER_DATA_JPA
    implementation SPRING_BOOT_STARTER_VALIDATION
    implementation POSTGRESQL_DRIVER

    // Shared test dependencies
    testImplementation SPRING_BOOT_STARTER_TEST
    testImplementation MOCKITO_JUNIT_JUPITER
    testImplementation MOCKITO_INLINE
    testImplementation JUNIT_JUPITER_API
    testRuntimeOnly JUNIT_JUPITER_ENGINE

    // Integration test specific dependencies
    testImplementation TESTCONTAINERS
    testImplementation TESTCONTAINERS_POSTGRESQL
}

test {
    useJUnitPlatform()
}

test {
    useJUnitPlatform()
}
